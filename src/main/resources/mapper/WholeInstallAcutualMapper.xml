<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.eservice.api.dao.WholeInstallAcutualMapper">
  <resultMap id="BaseResultMap" type="com.eservice.api.model.whole_install_acutual.WholeInstallAcutual">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="whole_install_plan_id" jdbcType="INTEGER" property="wholeInstallPlanId" />
    <result column="head_count_done" jdbcType="INTEGER" property="headCountDone" />
    <result column="cmt_feedback" jdbcType="VARCHAR" property="cmtFeedback" />
    <result column="create_date" jdbcType="TIMESTAMP" property="createDate" />
    <result column="update_date" jdbcType="TIMESTAMP" property="updateDate" />
    <result column="attendance_member" jdbcType="VARCHAR" property="attendanceMember" />
    <result column="overtime_member" jdbcType="VARCHAR" property="overtimeMember" />
    <result column="absence_member" jdbcType="VARCHAR" property="absenceMember" />
    <result column="attendance_tomorrow" jdbcType="VARCHAR" property="attendanceTomorrow" />
  </resultMap>

  <resultMap id="WholeInstallAcutualDetailsResultMap" type="com.eservice.api.model.whole_install_acutual.WholeInstallAcutualDetails">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="whole_install_plan_id" jdbcType="INTEGER" property="wholeInstallPlanId" />
    <result column="head_count_done" jdbcType="INTEGER" property="headCountDone" />
    <result column="cmt_feedback" jdbcType="VARCHAR" property="cmtFeedback" />
    <result column="create_date" jdbcType="TIMESTAMP" property="createDate" />
    <result column="update_date" jdbcType="TIMESTAMP" property="updateDate" />
    <result column="attendance_member" jdbcType="VARCHAR" property="attendanceMember" />
    <result column="overtime_member" jdbcType="VARCHAR" property="overtimeMember" />
    <result column="absence_member" jdbcType="VARCHAR" property="absenceMember" />
    <result column="attendance_tomorrow" jdbcType="VARCHAR" property="attendanceTomorrow" />

    <result column="order_num" jdbcType="VARCHAR" property="orderNum" />
    <result column="nameplate" jdbcType="VARCHAR" property="nameplate" />
    <result column="location" jdbcType="VARCHAR" property="location" />
    <result column="head_num" jdbcType="VARCHAR" property="headNum" />
    <result column="cmt_send" jdbcType="VARCHAR" property="cmtSend" />
    <result column="group_name" jdbcType="VARCHAR" property="groupName" />

  </resultMap>

  <select id="selectWholeInstallDetails" resultMap="WholeInstallAcutualDetailsResultMap">
    SELECT * FROM whole_install_acutual wia
    LEFT JOIN whole_install_plan wip on wia.whole_install_plan_id = wip.id
    LEFT JOIN machine_order mo on mo.id = wip.order_id
    LEFT JOIN machine m on mo.id = m.order_id
    LEFT JOIN install_group ig on ig.id = wip.install_group_id

    where  1=1
    <if test="orderNum != null and orderNum != ''">
      and mo.order_num = #{orderNum}
    </if>
    <if test="nameplate != null and nameplate != ''">
      and m.nameplate = #{nameplate}
    </if>
    <if test="installGroupName != null and installGroupName != ''">
      and ig.group_name = #{installGroupName}
    </if>
  </select>
</mapper>